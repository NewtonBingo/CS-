## NoSQL
NoSQL指的是非关系型数据库，相对于传统的关系型数据库（如MySQL、Oracle等），它们采用不同的数据存储模型，更适合存储半结构化和非结构化数据，如文档、键值对、列族和图形等。与关系型数据库相比，NoSQL数据库通常更具有可扩展性、性能更好、数据模型更灵活和更高的可用性，因此适用于需要处理大规模数据和高并发访问的场景。常见的NoSQL数据库包括MongoDB、Cassandra、Redis、Couchbase等。
### Redis
Redis是一个基于内存的键值存储数据库，它的内部架构主要包括以下几个部分：
- 数据结构：Redis支持多种数据结构，包括字符串、哈希、列表、集合和有序集合等。每种数据结构在内存中都有对应的结构体来存储数据。
- 单线程模型：Redis是单线程模型，它使用一个主线程来处理所有客户端的请求。这意味着Redis可以在处理高并发请求时保持相对较低的延迟。
- 事件驱动模型：Redis使用事件驱动模型来处理网络事件和文件事件。它使用I/O多路复用技术来监听多个客户端连接和文件描述符，并在有事件发生时进行处理。
- 内存管理：Redis使用内存池来管理内存分配和释放。它使用一些常见的内存管理技术来优化内存使用，包括内存碎片整理、惰性删除和过期键的清除等。
- 持久化：Redis支持两种持久化方式，分别是RDB和AOF。RDB是一种快照方式，它可以将当前内存中的数据保存到硬盘上。AOF是一种日志方式，它可以将所有写操作记录到一个日志文件中，以便在Redis重启时进行数据恢复。
- 复制：Redis支持主从复制模型。主节点可以将自己的数据复制到一个或多个从节点上，从而实现数据的备份和负载均衡。
- 集群：Redis还支持分布式集群模型。它可以将多个节点组合成一个集群，在集群中进行数据分片和负载均衡。每个节点只负责处理一部分数据，从而提高整个集群的性能和可靠性。
![image](https://user-images.githubusercontent.com/107925483/230647203-0107e47c-a1b2-43f2-9505-fe75f76a0bbd.png)
#### 数据结构
![image](https://user-images.githubusercontent.com/107925483/230647830-a3c3869d-a3e8-497b-9157-5e0c5cb270a7.png)
Redis是一种基于内存的键值存储数据库，支持多种数据结构。以下是Redis支持的主要数据结构：
- 字符串 (String)：Redis中最基本的数据结构，可以存储任何形式的字符串，包括二进制数据。字符串类型的值最大可以达到512MB。
``` sql
> SET mykey "Hello"
OK
> GET mykey
"Hello"
> APPEND mykey " World"
OK
> GET mykey
"Hello World"

```
- 列表 (List)：Redis列表是一个有序的字符串链表，其中每个节点都包含一个字符串值。可以在列表的头部或尾部添加、删除元素。
``` sql
> LPUSH mylist "World"
1
> LPUSH mylist "Hello"
2
> LRANGE mylist 0 -1
1) "Hello"
2) "World"
> LPOP mylist
"Hello"

```
- 集合 (Set)：Redis集合是一组唯一的无序字符串，支持插入、删除、交集、并集、差集等操作。
``` sql
> SADD myset "hello"
1
> SADD myset "world"
1
> SADD myset "hello"
0
> SMEMBERS myset
1) "hello"
2) "world"
> SISMEMBER myset "hello"
1
> SREM myset "hello"
1

```
- 散列表 (Hash)：Redis散列表类似于常规散列表，其中包含键值对。可以插入、获取和删除单个键值对，或者获取整个散列表。
``` sql
> HSET myhash field1 "Hello"
1
> HSET myhash field2 "World"
1
> HGET myhash field1
"Hello"
> HGETALL myhash
1) "field1"
2) "Hello"
3) "field2"
4) "World"

```
- 有序集合 (Sorted Set)：Redis有序集合类似于集合，但是每个成员都关联一个分数。这个分数可以用来排序和范围查找操作。
``` sql
> ZADD myzset 1 "one"
1
> ZADD myzset 2 "two"
1
> ZADD myzset 3 "three"
1
> ZRANGEBYSCORE myzset 2 3
1) "two"
2) "three"

```
- Bitmaps：Redis也支持位图数据结构，可以将二进制数据存储在一个字符串中，支持位操作。
``` sql
> SETBIT mybitmap 0 1
1
> SETBIT mybitmap 2 1
1
> GETBIT mybitmap 0
1
> BITCOUNT mybitmap
2

```
这些数据结构可以通过一些基本的命令来操作，例如设置、获取、删除、更新等。Redis还支持一些高级操作，如事务、发布/订阅、Lua脚本等。

#### 网络模型
Redis使用基于事件驱动的异步I/O模型，可以支持非常高的并发连接。Redis的网络模型主要包括以下几个组成部分：
-  单线程模型：Redis使用单线程模型，所有的命令都在一个单独的线程中执行。这个线程负责接收客户端连接、解析命令、执行命令、发送响应等工作。
-  I/O多路复用：Redis使用I/O多路复用机制，可以同时处理多个客户端连接，避免了为每个连接都创建一个线程的开销。
-  非阻塞式网络编程：Redis使用非阻塞式网络编程，所有的网络I/O操作都是非阻塞的，避免了线程阻塞等待网络I/O操作完成的情况。
-  事件驱动：Redis使用事件驱动模型，通过监听文件描述符上的事件来触发相应的处理函数，如新连接、数据可读等事件。
Redis将所有的网络事件都交给一个专门的事件处理器来处理，事件处理器会根据事件类型调用相应的事件处理函数，如新连接事件会调用acceptHandler函数、数据可读事件会调用readQueryFromClient函数等。事件处理器使用了一个事件轮询库来实现事件循环，等待网络事件的到来并分发给对应的事件处理函数。

总之，Redis的网络模型非常高效，可以支持大量的并发连接，同时保持了低延迟和高吞吐量。
