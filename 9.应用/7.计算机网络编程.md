## 套接字
套接字编程是一种网络编程技术，它可以让程序在不同的计算机之间进行通信。套接字编程的原理可以总结为以下几点：

- 创建套接字：在编写网络应用程序时，需要创建一个套接字，以便应用程序能够通过网络发送和接收数据。

- 绑定地址：在创建套接字后，需要将其绑定到本地地址和端口号上，以便其他计算机能够通过该地址和端口号找到应用程序。

- 监听连接请求：如果应用程序需要作为服务器，那么它需要监听连接请求，并等待客户端连接。

- 接受连接：一旦有客户端连接，服务器需要接受连接请求，并创建一个新的套接字来处理与该客户端之间的通信。

- 发送和接收数据：一旦连接建立，服务器和客户端就可以通过套接字进行数据的发送和接收。

- 关闭连接：在数据传输完成后，需要关闭连接以释放资源。
- 
一个简单的服务器并接受来自客户端的消息:  
``` c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <unistd.h>

int main() {
    int server_fd, new_socket, valread;
    struct sockaddr_in address;
    int opt = 1;
    int addrlen = sizeof(address);
    char buffer[1024] = {0};
    const char* message = "Hello from server";

    // 创建服务器端套接字
    if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0) {
        perror("socket failed");
        exit(EXIT_FAILURE);
    }

    // 设置套接字选项，防止地址被占用
    if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, &opt, sizeof(opt))) {
        perror("setsockopt");
        exit(EXIT_FAILURE);
    }

    // 设置服务器地址和端口
    address.sin_family = AF_INET; // IPv4
    address.sin_addr.s_addr = INADDR_ANY; // 任意本地地址
    address.sin_port = htons(8080); // 端口号

    // 将套接字绑定到指定的地址和端口
    if (bind(server_fd, (struct sockaddr *)&address, sizeof(address)) < 0) {
        perror("bind failed");
        exit(EXIT_FAILURE);
    }

    // 监听连接请求，最多允许 3 个客户端连接
    if (listen(server_fd, 3) < 0) {
        perror("listen failed");
        exit(EXIT_FAILURE);
    }

    // 等待客户端连接
    if ((new_socket = accept(server_fd, (struct sockaddr *)&address, (socklen_t*)&addrlen)) < 0) {
        perror("accept failed");
        exit(EXIT_FAILURE);
    }

    // 发送欢迎消息给客户端
    send(new_socket, message, strlen(message), 0);

    // 读取客户端发送的消息
    valread = read(new_socket, buffer, 1024);
    printf("Client: %s\n", buffer);

    // 关闭连接
    close(new_socket);
    close(server_fd);

    return 0;
}

```
