# C语言风格推荐
## 驼峰命名法
``` c
/*
 * 文件名：filename.c
 * 作者：Your Name
 * 描述：这是一个用于描述文件作用的简短描述
 * 版本号：1.0.0
 * 创建时间：2023年4月3日
 * 修改时间：2023年4月3日
 */

#include <stdio.h>  // 包含标准输入输出库头文件
#include <stdlib.h> // 包含动态内存分配函数头文件

// 宏定义，使用大写字母和下划线命名法
#define PI 3.1415926

// 枚举类型定义，使用 CamelCase 命名规范
enum Weekday {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
};

// 结构体定义，使用 CamelCase 命名规范
typedef struct {
    int age;             // 年龄，使用小写字母和下划线命名法
    char name[20];       // 姓名，使用小写字母和下划线命名法
    enum Weekday birthday;   // 生日，使用 CamelCase 命名规范
} Person;

// 函数声明，使用小写字母和下划线命名法
int calculate_sum(int num1, int num2);

/*
 * 函数名：main
 * 描述：主函数
 * 参数：无
 * 返回值：整型
 */
int main() {
    // 变量定义，使用小写字母和下划线命名法
    int num1 = 10;      // 数字1
    int num2 = 20;      // 数字2
    float result = 0;   // 结果

    // 调用函数并打印结果
    result = calculate_sum(num1, num2);
    printf("The sum of %d and %d is %.2f\n", num1, num2, result);

    // 常量使用大写字母和下划线命名法
    printf("The value of PI is %.4f\n", PI);

    // 枚举类型变量使用 CamelCase 命名规范
    enum Weekday today = MONDAY;
    printf("Today is %d\n", today);

    // 结构体变量使用 CamelCase 命名规范
    Person p1 = {25, "Tom", FRIDAY};
    printf("My name is %s, and I'm %d years old. My birthday is on %d\n", p1.name, p1.age, p1.birthday);

    // 指针变量定义，使用小写字母和下划线命名法
    int *p_num1 = &num1;  // p_num1 指向 num1
    int *p_num2 = &num2;  // p_num2 指向 num2

    // 指针变量赋值
    *p_num1 = 20;
    *p_num2 = 30;

    // 打印更改后
    printf("num1 is %d, num2 is %d\n", num1, num2);

      // 动态内存分配，使用 CamelCase 命名规范
    int *p_arr = (int *)malloc(sizeof(int) * 5);  // 分配 5 个 int 类型的内存空间
    if (p_arr == NULL) {
        printf("Memory allocation failed.\n");
        return -1;
    }

    // 使用指针操作内存空间
    for (int i = 0; i < 5; i++) {
        *(p_arr + i) = i * 2;
    }

    // 打印数组元素
    for (int i = 0; i < 5; i++) {
        printf("%d ", *(p_arr + i));
    }

    // 释放内存空间
    free(p_arr);

    return 0;
 }
 
/*
 * 函数名：calculate_sum
 * 描述：计算两个数的和
 * 参数：num1：整型数1，num2：整型数2
 * 返回值：整型，表示两个数的和
 */
int calculate_sum(int num1, int num2) {
    int sum = num1 + num2;
    return sum;  // 返回函数结果
}
```

该模板展示了以下命名方式：

1. 宏定义：使用大写字母和下划线命名法；
2. 枚举类型：使用 CamelCase 命名规范；
3. 结构体：使用 CamelCase 命名规范；
4. 函数名：使用小写字母和下划线命名法；
5. 变量名：使用小写字母和下划线命名法；
6. 常量：使用大写字母和下划线命名法；
7. 指针变量：使用小写字母和下划线命名法；
8. 内存分配：使用 CamelCase 命名规范。

## Linux C风格
是指 Linux 内核中 C 语言代码的命名风格和编码规范。它是一种基于 K&R 风格的扩展，也称为 Linux 编程风格，是许多开源项目和公司内部代码规范的基础之一。
``` c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// 使用下划线来分隔单词，以便提高可读性
int global_variable = 10;

// 函数名使用小写字母，单词之间使用下划线分隔
void print_global_variable() {
  printf("Global variable: %d\n", global_variable);
}

// main 函数的参数应该有 void
int main(void) {
  int local_variable = 20;

  printf("Local variable: %d\n", local_variable);
  print_global_variable();

  // 数组和指针
  int array[5] = {1, 2, 3, 4, 5};
  int *array_pointer = array;

  printf("Array element at index 3: %d\n", array[3]);
  printf("Array element at index 3 using pointer: %d\n", *(array_pointer + 3));

  // 内存分配
  char *string = malloc(sizeof(char) * 10);

  // 使用 strncpy() 来避免缓冲区溢出
  strncpy(string, "Hello", 5);
  strcat(string, " World");

  printf("String: %s\n", string);

  free(string);

  // 文件读写
  FILE *file = fopen("example.txt", "w");

  if (file == NULL) {
    perror("Cannot open file");
    exit(EXIT_FAILURE);
  }

  // 使用 fprintf() 来写入文件
  fprintf(file, "This is an example.\n");
  fclose(file);

  file = fopen("example.txt", "r");

  if (file == NULL) {
    perror("Cannot open file");
    exit(EXIT_FAILURE);
  }

  char buffer[100];

  // 使用 fgets() 来读取文件
  fgets(buffer, 100, file);
  fclose(file);

  printf("File content: %s", buffer);

  // 指针和引用
  int a = 5;
  int *b = &a;

  printf("a = %d\n", a);
  printf("b = %d\n", *b);

  // 异常处理
  int divisor = 0;
  int result;

  if (divisor == 0) {
    // 输出错误信息到 stderr
    fprintf(stderr, "Error: Cannot divide by zero\n");
    exit(EXIT_FAILURE);
  }

  result = 10 / divisor;

  printf("Result: %d\n", result);

  return 0;
}
```
1. 函数名和变量名使用小写字母和下划线命名法；
2. 宏定义使用大写字母和下划线命名法；
3. 结构体、枚举类型、typedef 定义的类型名称使用首字母大写的驼峰命名法；
4. 函数名、变量名、宏定义的下划线后面不加空格；
5. if、for、while、switch 等关键字后面必须有空格；
6. 左括号前不加空格，右括号后必须加空格；
7. 函数名后面必须有空格，参数列表中的逗号后面必须有空格；
8. 每个函数都必须有注释说明函数的功能、输入参数、返回值等信息；
9. 每行代码不得超过 80 个字符；
10. 每个文件必须以一个空行结束。
```
## const和static的用法
``` c
#include <stdio.h>

// 定义全局变量，可以被多个函数访问
int global_var = 10;

// 定义全局常量，只能被读取，不能被修改
const int const_global_var = 100;

// 定义静态全局变量，只能被当前文件内的函数访问
static int static_global_var = 1000;

// 定义函数
void foo() {
  // 定义局部变量，只能被当前函数访问
  int local_var = 20;
  // 定义局部常量，只能被读取，不能被修改
  const int const_local_var = 200;

  // 修改全局变量的值
  global_var = 30;
  // 编译器会报错，不能修改常量的值
  // const_global_var = 200;

  // 修改静态全局变量的值
  static_global_var = 2000;

  printf("global_var = %d\n", global_var);
  printf("const_global_var = %d\n", const_global_var);
  printf("static_global_var = %d\n", static_global_var);
  printf("local_var = %d\n", local_var);
  printf("const_local_var = %d\n", const_local_var);
}

int main() {
  foo();

  // 编译器会报错，不能访问函数内的局部变量和常量
  // printf("local_var = %d\n", local_var);
  // printf("const_local_var = %d\n", const_local_var);

  return 0;
}
```
